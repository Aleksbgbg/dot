# Theming (Nord)
set -g @plugin "tmux-plugins/tpm"
set -g @plugin "arcticicestudio/nord-tmux"
## Set to 1 to avoid font issues
set -g @nord_tmux_no_patched_font 0

# Base
set -g prefix M-w

# nvim setup
set -g escape-time 0
set -g focus-events on
set -a terminal-features ",xterm-256color:RGB"

# Variables
set -g mouse on
set -g history-limit 250000
## Window and pane indexing from 1 (matching keyboard layout)
set -g base-index 1
set -g pane-base-index 1
set -g renumber-windows on

# Common bindings
bind -n M-C new-window -c "#{pane_current_path}"
bind -n M-R command-prompt "rename-window '%1'"
bind -n M-X confirm-before kill-window
bind -n M-x confirm-before kill-pane
bind -n M-z resize-pane -Z # zoom

# Fast pane splitting
bind -n M-| split-window -h -c "#{pane_current_path}"
bind -n M-- split-window -v -c "#{pane_current_path}"

# Session selection
bind M-q switch-client -p
bind M-e switch-client -n

# Window selection without prefix
bind -n M-1 select-window -t :1
bind -n M-2 select-window -t :2
bind -n M-3 select-window -t :3
bind -n M-4 select-window -t :4
bind -n M-5 select-window -t :5
bind -n M-6 select-window -t :6
bind -n M-7 select-window -t :7
bind -n M-8 select-window -t :8
bind -n M-9 select-window -t :9
bind -n M-0 select-window -t :0

# Window movement without prefix
bind -n M-< swap-window -d -t -1
bind -n M-> swap-window -d -t +1

# Pane selection without prefix
bind -n M-j select-pane -L
bind -n M-k select-pane -D
bind -n M-l select-pane -U
bind -n M-\; select-pane -R

# Pane movement without prefix
bind -n M-J select-pane -L \; swap-pane -t !
bind -n M-K select-pane -D \; swap-pane -t !
bind -n M-L select-pane -U \; swap-pane -t !
bind -n M-: select-pane -R \; swap-pane -t !

# Convenience bindings
bind M-r source-file "~/.tmux.conf" \; display-message "configuration reloaded"
bind M-p command-prompt \
  -p "save pane history to filename:" \
  -I "~/logs/main.txt" \
  "capture-pane -S -50000 ; save-buffer %1 ; delete-buffer"

# Tmux Plugin Manager
run "~/.tmux/plugins/tpm/tpm"
